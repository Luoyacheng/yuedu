[{
  "bookSourceComment": "作者：洛娅橙\n更新日志：\n1.1.4-补充搜索结果翻页\n1.1.4-细节优化，修复源地址获取\n1.1.3-广告净化，细节优化\n1.1.2-细节优化，增加评分功能\n1.1.1-支持发送书评\n1.0.1-版号刷新，用于更新功能测试\n1.0.0-已实现设想功能，后续进入维护阶段，为了美观和易读对大文本代码用hex进行了隐藏\n___________________________________________\n20241125-大更新，链接改用Data URL访问（主动js访问链接）-感谢xiaohan的参考\n20241124-增加“书评”，发现美化，简介增加最新章节显示\n20241121-自动购买功能\n20241120-限制访问间隔为2秒\n八叉发布页：https://8xsk.org\nip地址查看：https://iplark.com",
  "bookSourceGroup": "",
  "bookSourceName": "🌈八叉书库",
  "bookSourceType": 0,
  "bookSourceUrl": "洛娅橙-八叉书库",
  "bookUrlPattern": "https://www.\\d+\\.xyz/book/\\d+\\.html",
  "concurrentRate": "2100",
  "coverDecodeJs": "",
  "customOrder": -1,
  "enabled": true,
  "enabledCookieJar": false,
  "enabledExplore": true,
  "exploreUrl": "@js:\njava.put(\"banben\", '1.1.5');\neval(String(source.loginUrl));\nvar obj = {\n\t最近更: {\n\t\t\"url\": \"/sort/0/{{page}}.html\",\n\t\t\"fbp\": 0.2},\n\t\t'新(肉)':{\n\t\t\"url\": \"/sort/7/{{page}}.html\",\n\t\t\"fbp\": 0.15},\n\t最近入库: {\n\t\t\"url\": \"/top/postdate/{{page}}.html\",\n\t\t\"fbp\": 0.35},\n\t\t\n\t最近完: {\n\t\t\"url\": \"/modules/article/articlelist.php?fullflag=1&page={{page}}\",\n\t\t\"fbp\": 0.2,\n\t\t\"wrap\": true},\n\t\t'结(肉)':{\n\t\t\"url\": \"/modules/article/articlelist.php?sortid=7&fullflag=1&page={{page}}\",\n\t\t\"fbp\": 0.15},\n\t签约新书: {\n\t\t\"url\": \"/top/signtime/{{page}}.html\",\n\t\t\"fbp\": 0.35},\n\t\t\n\t字数榜: {\n\t\t\"url\": \"/top/words/{{page}}.html\",\n\t\t\"fbp\": 0.25,\n\t\t\"wrap\": true},\n\t收藏榜: {\n\t\t\"url\": \"/top/goodnum/{{page}}.html\",\n\t\t\"fbp\": 0.25},\n\t新书榜: {\n\t\t\"url\": \"/top/newhot/{{page}}.html\",\n\t\t\"fbp\": 0.25},\n\t\t\n\t总点击: {\n\t\t\"url\": \"/top/allvisit/{{page}}.html\",\n\t\t\"fbp\": 0.25,\n\t\t\"wrap\": true},\n\t月点击: {\n\t\t\"url\": \"/top/monthvisit/{{page}}.html\",\n\t\t\"fbp\": 0.25},\n\t周点击: {\n\t\t\"url\": \"/top/weekvisit/{{page}}.html\",\n\t\t\"fbp\": 0.25},\n\t\t\n\t总推荐: {\n\t\t\"url\": \"/top/allvote/{{page}}.html\",\n\t\t\"fbp\": 0.25,\n\t\t\"wrap\": true},\n\t月推荐: {\n\t\t\"url\": \"/top/monthvote/{{page}}.html\",\n\t\t\"fbp\": 0.25},\n\t周推荐: {\n\t\t\"url\": \"/top/weekvote/{{page}}.html\",\n\t\t\"fbp\": 0.25}\n\t}\n\nsurl = source.getVariable();\n\nvar sort = [];\npush = (title, url, size, wrap) => sort.push({\n    \"title\": title,\n    \"url\": url.startsWith(\"{{\") ? url : url ? surl + url : \"\",\n    \"style\": {\n      layout_flexGrow: 1,\n      layout_flexBasisPercent: size,\n      layout_wrapBefore: wrap ? wrap : false\n     }\n  });\n\nfor (x in obj) {\npush(x, obj[x].url, obj[x].fbp, obj[x].wrap);\n}\n//版本号\neval(`${java.hexDecodeToString(txtfx)}`);\nJSON.stringify(sort);",
  "header": "@js:\n(()=>{\n    var ck=source.getLoginHeader()||'';\n    var headers = {\n    \t'user-agent': ua, \n    \t'x-requested-with': bs,\n    \t'sec-ch-ua-platform': xt,\n    \t'cookie': ck\n    \t };\n    \t return JSON.stringify(headers);\n})();",
  "jsLib": "ua = 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Safari/537.36 Edg/130.0.2849.80';\nbs = 'com.microsoft.emmx';\nxt = 'Linux';\n\ntxtts='0A0AE2948DE38080E38080E38080E8AFA6E68385E9A1B5E88EB7E58F96E588B0E79A84E4B9A6E5908DE58F98E4BA86E38080E38080E38080E294920AE2949CE29480E29480E29480E29480E294ACE29480E29480E29480E29480E29480E29480E29480E29480E29480E29480E29480E29480E294A40AE29482E4B9A6E69EB6E697A7E4B9A6E29482E4B9A6E7B18DE4BFA1E681AFE7958CE99DA2E782B9E587BBE68DA2E6BA90E38080E38080E294820AE2949CE29480E29480E29480E29480E294BCE29480E29480E29480E29480E29480E29480E29480E29480E29480E29480E29480E29480E294A40AE29482E585B6E4BD99E68385E586B5E29482E8AFB7E68F90E7A4BAE68891E8BF9BE8A18CE7BBB4E68AA4E38080E38080E38080E38080E294820AE2949CE29480E29480E29480E29480E294BCE29480E29480E29480E29480E29480E29480E29480E29480E29480E29480E29480E29480E294A40AE29482E88194E7B3BBE696B9E5BC8FE29482E697A0202020F09FA4AAE38080E38080E38080E38080E38080E38080E38080E38080E38080E2948220E29494E29480E29480E29480E29480E294B4E29480E29480E29480E29480E29480E29480E29480E29480E29480E29480E29480E29480E29498';\n\ntxtfx='6C65742062616E62656E203D206A6176612E676574282262616E62656E22293B0A707573682822E78988E69CACE58FB73A222B62616E62656E2B22E38080E782B9E68891E588B7E696B0E59CB0E59D80222C20607B7B0A09696628706167653D3D31297B0A0963616368652E70757428273878626C31272C20736F757263652E6765745661726961626C65282920293B0A20736F757263652E7365745661726961626C65282727293B0A096576616C28537472696E6728736F757263652E6C6F67696E55726C29293B0A09696620286A6176612E6765742822626A312229203D3D3129207B723D27E4B9A6E6BA90E59CB0E59D80E69BB4E696B0E68890E58A9F262331303BE8AFB7E8BF94E59B9EE58F91E78EB0E9A1B5EFBC8CE784B6E5908EE995BFE68C89E69CACE4B9A6E6BA90E79A84E5908DE7A7B0262331303BE59CA8E5BCB9E587BAE79A84E88F9CE58D95E4B8ADE782B9E587BBE588B7E696B0E68C89E992AE22207A756F7A68653D22E68890E58A9F277D0A09656C736520696620286A6176612E6765742822626A312229203D3D3229207B723D27E88EB7E58F96E59CB0E59D80E5A4B1E8B4A5262331303BE58FAFE883BDE58E9FE59BA03AE291A0E8A2ABE68B89E9BB9128E7A88DE5908EE5868DE8AF95EFBC8CE68896E4B8BBE58AA8E68DA2697029E291A1E58F91E5B883E9A1B5E69C89E58F98E58AA828E69BB4E696B0E4B9A6E6BA90E78988E69CAC2922207A756F7A68653D22E5A4B1E8B4A5277D0A09656C7365207B723D27E8AFA5E59CB0E59D80E5B7B2E7BB8FE698AFE69C80E696B0E4BA86E591A2262331303BE5A682E69E9CE4B9A6E6BA90E4BE9DE697A7E5BC82E5B8B8262331303BE58FAFE4BBA5E58F8DE9A688E7BB99E6889122207A756F7A68653D22E9878DE5A48D277D0A096A6176612E7075742827626A31272C2030293B0A096A6176612E7075742827626A32272C2072293B0A7D0A0927687474703A2F2F3132372E302E302E312F272B706167650A097D7D602C20312C2074727565293B';\n\nyans='7661722074313D6E6577204461746528293B0A69313D74312E6765745365636F6E647328292B313B0A646F7B0A6C65742074323D6E6577204461746528293B0A69323D74322E6765745365636F6E647328293B0A6966202869323E693129207B69323D307D0A7D207768696C652028693229';\n\nfunction checkUrl(url) {\n            return new Promise((resolve, reject) => {\n                fetch(url, { mode: 'no-cors', method: 'HEAD' })\n                    .then(() => resolve(true))\n                    .catch(() => resolve(false));\n            });\n        }",
  "lastUpdateTime": 1733200632780,
  "loginCheckJs": "",
  "loginUi": "[\n    {\n        name: \"账号\",\n        type: \"text\"\n    },\n    {\n        name: \"密码\",\n        type: \"text\"\n    },\n    {\n        name: \"💍注册 \",\n        type: \"button\",\n        action: \"web()\"\n    },\n    {\n        name: \"　🔺登　录🔺　\",\n        type: \"button\",\n        action: \"Login()\"\n    },\n    {\n        name: \"登出♤\",\n        type: \"button\",\n        action: \"re()\"\n    },\n    {\n    \tname: \"💬说明\",\n    \ttype: \"button\",\n    \taction: \"sm()\"\n    \t},\n    \t{\n        name: \"🌐发布页　\",\n        type: \"button\",\n        action: \"ceshi()\"\n    },\n    \t{\n        name: \"🆕版本更新\",\n        type: \"button\",\n        action: \"gengxin()\"\n    }\n]",
  "loginUrl": "nn = String(source.getVariable());\nif (!nn) {\nlet rr=java.connect('https://www.8xsk.org/');\nlet cd=rr.code();\nlet ur=(rr.body().match(/电脑主站[^\"]+\\\"([^\"]+)\\\"/)||['',''])[1];\nlet x = cache.get('8xbl1');\n\nif (cd != 200||ur == '') {\n\tjava.longToast(\"书源地址获取失败💔\"+ur);\n\tsource.setVariable(x);\n\tjava.put(\"bj1\", 2);\n\t}\nelse {\n\tif (ur != x) {\n\t\t\tsource.setVariable(ur);\n\t\t\t//java.log(\"登录URL：源地址获取成功\");\n\t\t\tcache.put('8xbl1',ur);\n\t\t\tjava.put(\"bj1\", 1);}\n\t\telse {\n\t\t\tsource.setVariable(x);\n\t\t\tjava.put(\"bj1\", 0);}\n\t}\n}\n\r\nfunction shuchu(){\nlet cki = String(source.getLoginHeader()).includes(\"jieqiUserInfo\");\r\n    if (cki) {\r\n        java.toast(\"登录成功，VIP模式💎\");\r\n    }\r\n    else {\r\n        java.toast(\"登录失败，访客模式🔒\");\r\n    }\r\n}\n\nfunction login(){}\r\nfunction Login(){\n    let Info=source.getLoginInfoMap();\r\n    let url = nn+'/login.php';\r\n    let un = String(Info['账号'])||result['账号'];\r\n    let pw = String(Info['密码'])||result['密码'];\r\n    let time = new Date().getTime();\n    \n    var body = `username=${un}&password=${pw}&usecookie=1&submit=&act=login`;\n    \n    weiba = `?do=submit&jumpurl=${nn}`;\n    \r\n    let headers = {\r\n        'referer': nn,\n        \t'user-agent': ua,\n        \t'x-requested-with': bs,\n        \t'sec-ch-ua-platform': xt,\n        'cookie': '\"\"'\r\n    };\n    cookie.removeCookie(nn);\n    let cookie1 = java.post(url+ weiba,body,headers).cookies();\n    let ck = cookie.mapToCookie(cookie1);\n    //处理cookie格式\n    \r\n    //ck=cookie.getCookie(nn);\n    //cookie.setCookie(nn,ck);\n    //加入↑该代码后，让软件重启后网址的cookie不消失\n    //放入登录头\r\n    source.putLoginHeader(ck);\r\n    shuchu();\n    cookie.removeCookie(nn);\n    //仅使用登录头中信息\r\n}\r\n\r\nfunction web(){\r\n    let url = nn.replace('www.','') + '/register.php';\r\n    java.startBrowser(url, '八叉');\r\n}\n\nfunction ceshi(){\r\n    let url = 'https://8xsk.org';\n    //java.startBrowser(nn, '八叉书库');\n    //java.toast(result)\n    var ck=source.getLoginHeader()||'';\n    //cookie.setCookie(nn,ck);\n    //cki=cookie.getCookie(nn)\n    \n    java.startBrowser(url, '八叉书库发布页');\n    //java.toast(cki)\r\n}\n\nfunction gengxin(){\r\n    let url = 'https://www.coolapk.com/link?url=legado://import/Source?src=https://gitee.com/lyc486/yuedu2/raw/main/书源/八叉/8x.json';\n    java.startBrowser(url, '更新');\n    //java.longToast(txtts);\r\n}\r\n\r\nfunction re(){\r\n    cookie.removeCookie(nn);\n    source.removeLoginHeader();\n    //清除登录头\n    java.toast(\"回到访客模式🔒\");\r\n}\n\r\nfunction sm(){\n    //let cki = java.getCookie(nn, 'jieqiUserInfo');\nlet cki = String(source.getLoginHeader()).includes(\"jieqiUserInfo\");\n    let ms= \"访客模式🔒\";\n    if (cki != '') {\r\n        ms = \"VIP模式💎\";\r\n    }\n    //cache.delete(java.md5Encode16(ul));\n    let banben = java.get(\"banben\");\r\n    let tt = `\n|网址：${nn}　 　.\n|模式：${ms}　　　　　　   .\n|版本：${banben}　　　　　　　　　　.\n|作者：洛娅橙　　　　　　　　　.\n|网站账号免费注册　　　　　　　.\n|功能：登录,购买,评论,评分,升级　 .`;\n    java.longToast(tt);\r\n}",
  "respondTime": 180000,
  "ruleBookInfo": {
    "author": "",
    "canReName": "",
    "coverUrl": "class.divbox cf@img@src",
    "init": "<js>\neval(String(source.loginUrl));\n//搜索跳详情重定向(含已放书架的http)处理\nvar i = String(book.bookUrl).includes('https:/');\nif (i) {\n\tbook.bookUrl = `data:;base64,${java.base64Encode(baseUrl)},{'type':''}`;\n\t}\n\n//发书评功能\nlet bkbl = book.getVariable(\"custom\");\n//解书籍地址\nlet ml = String(book.bookUrl).replace(/.+,(.+),.+/,'$1');\nlet mlj = java.base64Decode(ml);\nif (bkbl=='🔒'||bkbl=='') {\n\tif (mlj.includes('search.php') ) {\n\t\t//为测试版已加书架的部分书处理\n\t\tjava.reGetBook();\n\t\tjava.longToast('❗已自动重新搜索书籍');\n\t\t}\n//带🔒或书籍变量为空会经过这里(跳过)\n\t}\nelse {\nlet bkid = (mlj.match(/book\\/(\\d+)/)||['',''])[1];\n//↑获取书id\n\nnn = String(source.getVariable());\nlet pfurl = nn+'/modules/article/rating.php';\nlet plurl = nn+'/modules/article/reviews.php';\nlet ck = source.getLoginHeader();\nlet cki = ck.match(/UserToken%3D([^%]+)/)||['',''];\ntk = cki[1];\n//↑获取链接和tk\n\nif (bkid != '' && tk != '') {\nlet tm = new Date().getTime();\nlet bkfs = (bkbl.match(/^(\\d|10)分$/) || ['','0'])[1];\nlet pfbody = `score=${bkfs}&id=${bkid}&ajax_request=${tm}`;\nlet plbody = `ptitle=&act=newpost&jieqi_token=${tk}&Submit=&pcontent=${bkbl}&aid=${bkid}&ajax_request=${tm}`;\n\nlet headers = {\r\n        'user-agent': ua,\n        'x-requested-with': bs,\n        'sec-ch-ua-platform': xt,\r\n        'referer': mlj,\n        'cookie': ck\r\n    };\nif (bkfs != 0) {url=pfurl;body=pfbody;}\nelse {url=plurl;body=plbody;}\nlet by = java.post(url,body,headers).body();\njava.longToast(\"\\n\"+java.htmlFormat(by));\n\t}\n//清空输入的书籍变量\nbook.putCustomVariable('');\n}\n//先发评论再刷新\nif (!i) {\n\tlet tt = java.hexDecodeToString(result);\n\tresult = java.ajax(tt);\n\tjava.setContent(result);\n\t}\n\n//内容判断\nlet r = java.getString('@@meta[name=\"keywords\"]@content');\nlet name=String(r).replace(/\\, .+/,'');\nlet author=String(r).replace(/.+\\, /,'');\n\nif (name) {\n\tbook.name=String(book.name)||name;\n\tbook.author=String(book.author)||author;\n\n//仅提示，手动更新会比较好(不自动处理)\n\tif (book.name!=name) {\n\t\t\tcache.put('8xbl1', source.getVariable() );\n\t\t\tsource.setVariable('');\n\t\t\t//会自动更新源地址，已备手动更新\n\t\t\tlet txt=java.hexDecodeToString(txtts);\n\t\t\tjava.longToast(txt);\n\t\t\t}\n\telse if (book.author!=author) {java.toast(\"详情页获取的作者不同\");java.log(\"作者：\"+author);}\n\telse {java.log(`《${book.name}》${book.author}`);}\n\t}\n\n//书名加载失败\nelse {\n\tcache.put('8xbl1', source.getVariable() );\n\tsource.setVariable('');\n\teval(String(source.loginUrl));\n\t//解书籍url为http，并拼接新源地址(无法解决书籍id不存在的情况)\n\tlet ml = String(book.bookUrl).replace(/.+,(.+),.+/,'$1');\n\tlet mlj = java.base64Decode(ml);\n\tlet nn = source.getVariable();\n\tlet rr = result.replace(/https\\:\\/{2}[A-z\\d\\.]+/, nn);\n\tbook.bookUrl=`data:;base64,${java.base64Encode(rr)},{'type':''}`\n\tjava.toast(\"详情页加载失败，请刷新重试\");\n \n}\n\tresult\n</js>",
    "intro": "&#10;{{@@class.tabcontent@class.tabvalue.1@td[0:3,9,10]@text}}\n{{@@.ratediv@text}}\n{{@@class.divbox@h3@a@text##^##最新章节：}}\n{{r=java.getString('.tabcontent .tabvalue:eq(0) div@textNodes');\nif (r==\"\") {''}\nelse {'简介：\\n'+r.replace('　　','<br>').replace('「','“').replace('」','”')}\n}}{{r=String(java.getString('#content>.c_row@html'));\nxi = book.getVariable(\"custom\")==\"🔒\";\n\tif (r==''||xi) {''}\nelse {\n\tr=r.replace(/<div class=\"c_subject\"[\\S\\s]+?div>|<span class=\"fr\"[\\S\\s]+?span>|回复：.+/g,'').replace(/<p>.+<\\/p>/g,'&#8206;\\n');\n\t//java.htmlFormat(r);\n\t}\n\t}}",
    "kind": "b:contains(标签：)~a@text##\\#",
    "lastChapter": "class.divbox@h3@a@text",
    "name": "",
    "tocUrl": "<js>\n//解书籍url为http\nlet ml = String(book.bookUrl).replace(/.+,(.+),.+/,'$1');\nlet mlj = java.base64Decode(ml);\nif (mlj.includes('search.php') ) {java.toast('书籍地址异常');}\n//转化目录url\nmlj.replace('/book/', '/read/');\n</js>",
    "wordCount": ".tabcontent .tabvalue.1@html##全文字数：(\\d+)##$1###"
  },
  "ruleContent": {
    "content": "<js>\nif (chapter.variable != null) {\nresult = chapter.variable;\nchapter.variable = \"\";\n\t}\nelse {\nresult = java.getString('#content,#acontent@html');\n\t}\nresult\n</js>",
    "imageStyle": "",
    "payAction": "",
    "replaceRegex": "##.*8xsk\\..*|.*跳转手机端阅读。|.*手机请访问：.*|八叉书库|八叉书[,~]库|(?:833330|8xsk)\\.(?:xyz|org)|(?:833330|8xsk|八叉)([^\\.])(?:xyz|org|书库)|八~叉|书~库##$1",
    "sourceRegex": "",
    "title": "<js>\nresult = java.getString('class.mt mb@a@text||class.tc mb@a@text');\n\nif (result.includes(\"登录\") ) {\n\tjava.toast(\"💎请重新登录书源账号\");\n\t}\n\nelse if (result.includes(\"充值\") ) {\neval(String(source.loginUrl));\nnn = String(source.getVariable());\nvar url = nn+'/modules/obook/buychapter.php';\nvar ck = source.getLoginHeader();\nvar tk = (ck.match(/UserToken%3D([^%]+)/)||['',''])[1];\nvar cid = String(chapter.url).match(/cid\\=(\\d+)/)[1];\nvar body = `buytype=1&act=buy&jieqi_token=${tk}&cid=${cid}&submit=`;\nlet headers = {\r\n        'user-agent': ua,\n        'x-requested-with': bs,\n        'sec-ch-ua-platform': xt,\r\n        'referer': chapter.url,\n        'cookie': ck\r\n    };\n    \nif (tk) {\n\tjava.post(url,body,headers);\n\tjava.toast(\"🔓已购买\");\n\t}\nelse {\n\tjava.longToast(\"💔未登录\");\n\t}\n\neval(`${java.hexDecodeToString(yans)}`);\n \n //重新解析正文\n rr = java.ajax(baseUrl);\nchapter.variable = java.getString('#content,#acontent@html',rr);\n\t}\n\n//界面不含登录和充值\n\"\"\n</js>"
  },
  "ruleExplore": {
    "author": "td.2@text||span:contains(作者：)+span@text||aj8k3@zuozhe",
    "bookList": "<js>\nif (baseUrl.startsWith('http://127.0') ) {\n\tif(baseUrl.endsWith('1')) {\n\t\tlet x=java.get('bj2');\n\t\tlet d=new Date();\n\t\tr=`<aj8k3 herf=\"链接处\" jianjie=\"${x}\" time=\"${java.timeFormat(d)}\">反馈结果</aj8k3>`;\n\t\tresult=[r]\n\t\t}\n\t\telse {result = [];}\n}\nelse {\nresult = java.getElements('@@#jieqi_page_contents>tr||#content div[class=\"c_row cf\"]');\n}\nresult\n</js>",
    "bookUrl": "td.0@a.-1@href||class.c_subject@a.1@href\n<js>\nnn = source.getVariable();\nrr = result.replace(/https\\:\\/{2}[A-z\\d\\.]+/, nn);\n`data:;base64,${java.base64Encode(rr)},{'type':''}`\n</js>",
    "coverUrl": "td.0@a.-1@href||img@src##book\\/(\\d+)\\.html|(htt.*\\.jpg)##$1$2###\n<js>\nif (/articlelist|sort/.test(baseUrl)) {result}\nelse{\n  if (result<1000) {n=0}\n  else {n=result.slice(0,-3);}\n  '/files/article/image/'+n+'/'+result+'/'+result+'s.jpg';\n}\n</js>",
    "intro": "td.3@text||class.c_description@text||aj8k3@jianjie\n<js>\nif (baseUrl.includes(\"top/words\")) {'⠀\\n字数：'+(result/10000).toFixed(2)+'万'}\nelse if (baseUrl.includes(\"top/goodnum\")) {'⠀\\n收藏数：'+result}\n//新书榜\nelse if (baseUrl.includes(\"top/newhot\")) {\n\tresult = result>9999 ? \t(result/10000).toFixed(2)+'万' : result;\n\t'⠀\\n点击数：'+result}\nelse if (baseUrl.includes(\"top/signtime\")) {\n  var t = parseInt(result)*1000;\n  var date = new Date(t);\n  y = date.getFullYear()%2000;\n  m = date.getMonth() + 1;\n  d = date.getDate();\n  h = date.getHours().toString().padStart(2, '0');\n  min = date.getMinutes().toString().padStart(2, '0');\n  s = date.getSeconds();\n  //tt = date.toLocaleTimeString();\n  '⠀\\n签约时间：'+y+'年'+m+'月'+d+'日'+h+':'+min+' '+s+'秒'\n}\nelse if (baseUrl.includes(\"top/lastupdate\")) {'⠀\\n字数：'+(result/10000).toFixed(2)+'万'}\nelse if (baseUrl.includes(\"top/postdate\")) {'⠀\\n入库时间：'+result}\nelse if (baseUrl.includes(\"top/allvisit\")) {\n\tresult = result>999 ? \t(result/10000).toFixed(2)+'万' : result;\n\t'⠀\\n总点击：'+result}\nelse if (baseUrl.includes(\"top/monthvisit\")) {\n\tresult = result>999 ? \t(result/10000).toFixed(2)+'万' : result;\n\t'⠀\\n月点击：'+result}\nelse if (baseUrl.includes(\"top/weekvisit\")) {\n\tresult = result>9999 ? \t(result/10000).toFixed(2)+'万' : result;\n\t'⠀\\n周点击：'+result}\nelse if (baseUrl.includes(\"top/allvote\")) {'⠀\\n总推荐：'+result}\nelse if (baseUrl.includes(\"top/monthvote\")) {'⠀\\n月推荐：'+result}\nelse if (baseUrl.includes(\"top/weekvote\")) {'⠀\\n周推荐：'+result}\nelse if (/articlelist|sort/.test(baseUrl)) {\tresult.replace('「','“').replace('」','”').replace(/\\s/g,' ')}\nelse if (baseUrl.startsWith('http://127.0') ) {'⠀\\n'+result}\nelse {''}\n</js>",
    "kind": "td[4,5]@text||span:contains(更新：)+span@text||aj8k3@time",
    "lastChapter": "td.1@a.-1@text||class.c_subject@a.-1@text",
    "name": "td.0@a.-1@text||class.c_subject@a.1@text||aj8k3@text",
    "wordCount": "<js>\nif (/articlelist|sort/.test(baseUrl)) {\n  java.getString('span:contains(字数：)+span@text')\n}\n</js>"
  },
  "ruleSearch": {
    "author": "span:contains(作者：)+span@text",
    "bookList": "<js>\njava.setContent(cache.get('8xss1') );\ncache.put('8xss1', '');\nlet r1 = java.getString('#content .blockcontent@text');\nif (r1.includes(\"错误原因\")) {java.longToast(r1);[]}\nelse {java.getElement('#jieqi_page_contents>div');}\n</js>",
    "bookUrl": "class.c_subject@a.0@href\n<js>\n`data:;base64,${java.base64Encode(result)},{'type':''}`\n</js>",
    "checkKeyWord": "",
    "coverUrl": ".fl img@src",
    "intro": ".c_description@text\n<js>\nresult.replace('「','“').replace('」','”').replace(/\\s/g,' ')\n</js>",
    "kind": "span:contains(更新：)+span@text&&span:contains(关键字：)+span@text\n<js>\nString(result).replace(/[\\[\\]\\#\\,]/g,'').split(' ');\n</js>",
    "lastChapter": "span:contains(最新章节：)+span@text",
    "name": ".c_subject@text##\\\"",
    "wordCount": "span:contains(字数：)+span@text"
  },
  "ruleToc": {
    "chapterList": ".index dd,dt",
    "chapterName": "text##八叉书库|833330\\.xyz|八叉书。库|8xs。org|八叉~书库",
    "chapterUrl": "a@href",
    "formatJs": "",
    "isPay": "",
    "isVip": "",
    "isVolume": "dt@text",
    "preUpdateJs": "",
    "updateTime": "{{@@dd@a@title##\\d{1,2}\\:\\d{1,2}更新，共(\\d+字).*## $1}}\n{{@@dd@em@text##.+##💎}}"
  },
  "searchUrl": "@js:\neval(String(source.loginUrl));\nvar nn = source.getVariable();\nvar url1 = nn+ '/modules/article/search.php';\nbody=`searchtype=all&searchkey=${key}&act=search&submit=`;\nvar url2 = \tnn + `/modules/article/search.php?searchkey=${key}&searchtype=all&page=${page}`\n\ntry {\n\tif (page == 1)\n\tvar ss = java.post(url1,body,{});\n\telse\n\tvar ss = java.get(url2,{});\n}\ncatch(err) {\n\tcache.put('8xbl1', source.getVariable() );\n\tsource.setVariable('');\n\tjava.toast(\"💔搜索出错\");\n\t}\n\ncode = ss.statusCode();\nrr = `data:;base64,${java.base64Encode('https://8xsk.org')},{'type':''}`;\n\nif (code == 302) {\n\t//重定向\n\trr = ss.header(\"location\");\n\t}\nelse if (code == 200) {\n\tcache.put('8xss1', ss.body() );\n\t}\nelse if (code == 520) {\n\tjava.toast(\"💔IP被拉黑\");\n\t}\nelse {\n\tjava.put(\"ssjieguo\", ss.body() );\n\tjava.toast(\"💔搜索响应码异常\");\n\t}\n\nrr",
  "variableComment": "♦源变量为当前书源使用的地址\n　 可点击发现页版本号手动刷新\n\n♦书籍变量：\n　 ①填写  🔒 并刷新，关闭本书评论显示\n　 ②填写分数并刷新，使用分数进行评分\n　 ③填写其它并刷新，内容作为评论发送\n分数格式示意“1分”“2分”…“10分”\n\n！注意区分源变量和书籍变量\n",
  "weight": 0
}]